* 不重数集排序最小交换次数为 $“$ 数集大小 $-$ 该数在有序数组中的下标与原数的下标连成的有向图中简单环的个数 $"$
* 在差分上求覆盖点被哪**两个**区间覆盖$\to$多维护两个值{加 编号，加 编号$^2$}，解方程
* 给定一个$n$元组$(d_1,...,d_n)\ (d_1\geq...\geq d_n\geq 0)$ 表示每个点的度数，如果这$n$个点能构成一张图，当且仅当：
  * $\Sigma_{i=1}^n d_i \equiv 0\ (\mod 2)$
  * $\Sigma_{i=1}^k d_i \leq k(k-1)\ +\ \Sigma_{i=k+1}^n min(d_i,k)$ ，对于任意$k\in[1,n]$成立
* 对于某些会被多次改动的值要注意它是否已经被更新，注意数据**及时性**和**有效性**
* 对于强连通的竞赛图一定有一个包含所有点的环
* 竞赛图缩点后是一条链
  * 竞赛图是两两点之间都有一条有向边
* [x] 线段树维护建边
* [x] 前缀和维护建边
* 图$\to$分层图（从一个点开始，以每个点到该点的距离分层，则每个点只可能与 上一层，自己这一层，下一层 有关）
* [ ] $surreal\ number$

  * <研究之美>
  * 不平等博弈
* 对于方格图控制周围四个点 $\equiv$ 控制中间点，利用黑白染色建分层图
* 带通配符字符串匹配
  * 考虑两个字符匹配 $a,b$ (认为通配符为0)
  * 若两个字符匹配，则 $(a-b)^2ab==0$
  * $fft$
* 期望
  * $Min-Max$ 转换
  * 把$A_i$看成$\{1,2,3,...,A_i\}$
  * $max(A_i)\equiv A_i$的并
  * $min(A_i)\equiv A_i$的交
  * $max(A_i)=\sum_{S\subset[n]}(-1)^{|S|-1}min_{j\in S}(A_j)$
* [ ] $FWP$集合交卷积
* 给出一个长度为$N\leq10^5$的序列$a\ (a_i<2^{20})$，和一个界$x<2^{20}$。
  * 你需要支持$M\leq10^5$个操作：
    * 修改序列中的某个元素。
    * 询问在区间$[l,r]$内满足$l\leq L\leq R\leq r$且$[L,R]$的$or$和 $\geq x$ 得子区间$[L,R]$的个数
  * 题解：
  * 对于没有修改操作的问题
    * 观察到如果我们固定左端点，那么右端点的变化是单调的
    * 那么我们可以将问题转化为求$\sum_{i=l}^{r}(r-R_i+1)*[R_i\leq r]$
      * $R_i$为左端点为$i$是第一次 $or$和 达到$x$的位置
    * 问题进一步转化为 维护两个二维平面分别为$(i,R_i)$的点权为$R_i$和$1$，对于每个询问在两个二维平面上求矩阵和即可
  * 对于有修改操作的问题
    * 对于一个确定端点的前缀、后缀等结构，”$or$和“ 发生改变不超过$logW\ (20)$ 次
      * 对于值相同的前缀和后缀可以缩为一个，则$O(N)\to O(logW)$
      * 但确定前缀中哪些地方是发生改变的需要$O(N),\ $故我们需要利用分治结构，通过将它左右子树上的部分信息合并来求得。具体做法：
        * 考虑前缀\后缀和什么情况会发生改变
          * 在二进制中某一位第一次出现$1$的时候
        * 故我们只要记录该子问题中从前往后，从后往前每一位第一次出现$1$的位置即可
      * 实现：线段树
        * 在线段树上的节点维护两个东西
          * 每一位 第一次 和 最后一次 出现的位置：合并时在左右儿子的对应位取$min/max$即可
            * 单次合并$O(logW)$
          * 区间$[L,R]$内答案：左右儿子答案$+$跨中点$(mid)$的答案
            * 跨中点的答案可以使用左右儿子中每一位最后一次出现的位置拿出左端点和右端点进行计算
            * 单次合并$O(logW)$
        * 修改：
          * 只需改叶节点到根的路径即可
        * 查询：
          * 遇到完整的区间是直接返回答案；遇到完全位于某个孩子，递归进该孩子
          * 当两个孩子都需递归时，还需计算跨中点的答案（方法同$build$时的操作）
        * 总复杂度$O(N\ logN\ logW)$
* $dp$每次一定要找是否有**决策单调性**
  * 以二维$dp$为例：
    * $dp_{i,j}=min(dp_{i,j},dp_{k,j-1}+w_{k+1,i})$
    * $\forall\ 0\leq x< y < i$
    * $suppose\ dp_{y,j-1}\to dp_{i,j},\ dp_{x,j-1}\to dp_{i+1,j}$
    * $\Rightarrow\ dp_{y,j-1}+w_{y+1,i}\leq dp_{x,j-1}+w_{x+1,i}$
    * $\&\&\ dp_{x,j-1}+w_{x+1,i+1}< dp_{y,j-1}+w_{y+1,i+1}$
    * $\Rightarrow w_{y+1,i}-w_{x+1,i}\leq dp_{x,j-1}-dp_{y,j-1}< w_{y+1,i+1}-w_{x+1,i+1}$
    * $\Rightarrow w_{x+1,i+1}-w_{x+1,i}< w_{y+1,i+1}-w_{y+1,i}$
  * 若有决策单调性，则可以分层$dp$ （按$j$分层）$O(n^3)\to O(n^2)$
  * 利用**分治结构**将 $O(n^2)\to O(nlogn)$
  * ![dp决策单调性-分层-分治](/Users/duanlingbo/Desktop/OI/knowledge/杂/dp决策单调性-分层-分治.png)
* **缩图** 
  * 考虑对于一张图上对答案完全没有贡献的点可以**直接删掉**，对一答案只有**常数**级别的点可以缩成一个点
  * 如此，可将大数据范围降成小数据范围
  * 尤其在看到如$M\leq N+15$的条件，要考虑该方法
* **题目反向$\to$得到额外的限制**
* 一串题目条件(独立)$\to $分别独立开来算
* 当要求的数列$O(N)$满足有些区间的值相同，且值只会变化极小的常数$O(C)$时，可用二分二分分界点，复杂度可降为 $O(N)\to O(ClogN)$，例如：
  * $f_i$递增，$f_i\leq \frac{n}{i}$
  * 则对于$i\in [1,\sqrt n]$，$f_i$有$\sqrt n$个取值；对于$i\in[\sqrt n,n]$，$f_i\leq \sqrt n$ 有$\sqrt n$个取值。
  * 共$2\sqrt n$个分界点
* $x^k=\sum_{i=0}^k C_x^i*i!*S(k,i)$
  * $S(x,y)$为第二类斯特林数
* $y^2\equiv x\ (mod\ n)$ 给出$x$返回$y$ ，相当于模意义下开根，相当于对于$n$的每个素因子分别在模意义下开根。
  * 即$n=p_1^{r_1}p_2^{r_2}...p_n^{r_n}$时，$y_i\equiv y\ (mod\ p_i)$
  * 具体参见 $knowledge$\数学\质数\杂题
* 在改二进制数时，每一次改一位，要求每次操作都不能有连续三个相同数字。可转化为 $0/1$ 边界移动。
  * 具体参见 $knowledge$\数学\杂题
* **在$dp$看起来很简单的时候，一定要想一下这个$dp$有没有后效性**
* **有后效性的$dp$可以尝试升维，或转换维度对象（并非一切$dp$都是有下标维的），或者转换$dp$转移方向**
  * 例如：
    * 在数轴上进行的$dp$，可考虑把 **下标维$i$**  换成 **区间维$(l,r)$**
    * 
* 对于有关 **排列的最优化问题** 中，在没有 **标号的限制** 下，只能用 **状压$dp$** 来解决
* 状压$dp$ 在处理类似 **拓扑图** 的限制时可以将 一个结点 $x$ 在拓扑图上的前继写成 **二进制状态** 的形式（记为 $rstate_x$），当前将要向下拓展的状态记为$S$，则该节点可被拓展 当且仅当$S\&rstate_x==rstate_x$，即：
  * $f_{S|(1<<x)}=f_S+w(S,x)\ (S\&rstate_x==rstate_x)$
* 