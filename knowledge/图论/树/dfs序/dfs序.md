#### $dfs$序

* 通俗定义：在$dfs$过程中在 出/入节点 时，分别记录一次
* 功能：$dfs$序能将树形结构转化为线性结构
* ![dfs序实例_1](/Users/duanlingbo/Desktop/OI/knowledge/图论/树/dfs序/dfs序实例_1.png)
* 我们用上图举个例子
  * 上图的$dfs$序为 $12332442156657751$
  * 简化版 $12334425667751$ （可能）
* 本质：
  * $dfs$序 实质上是很多环的集合，每个子树在 $dfs$序 上的表达都是一个环
* 性质：
  * 维护子树：
    * $dfs$序能将 以$u$为子树的根的子树 转化为区间$[pos_{第一次出现u},pos_{最后一次出现u}]$，在维护子树（区间）的值的时候，只记录给区间中第一次出现的数的值 即可
    * 应用：
      * 树剖：是这个的简化版，只记录在 进入节点时记录，并在退出该节点时记录当前$dfs$序中最大标号，则$[enter_u,out_{mx_u}]$便是$u$子树
  * 维护$LCA$：
    * 例如，求$lca(u,v)$
    * 就是在区间$[pos_{最后一次出现u},pos_{第一次出现v}]$ 找深度最小的点
    * 利用$RMQ-ST\ \ O(nlogn)-O(1)$ $ST$原理 见knowledge/数据结构/中级/ST/ST.md
  * <font color="red">换根：</font>
    * 上文提到完整的$dfs$序相当于是一个环
    * 如果要把$u$换成根，就是从$pos_{第一次出现u}$开始把序列重写一遍（序列首尾相连）
  * <font color="gree">优秀性质</font>
    * 把树上的某些点抽离出来构成的**$dfn$序片段**依然是合法的$dfn$序，仍然具有$dfn$序的**全部**性质
  * 

