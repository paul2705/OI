* $T1$ [神树和排列](http://www.noi.ac/contest/171/problem/528)
  * 不难发现，对于一个排列，通过一次操作$F()$得到的新排列十分有规律：
    * 对于整个排列最大的数$x$，在$x$后面的数统一向前位移一格，而$x$沉底。
    * 同时在$x$前面的数自身形成一个子问题，重复上述过程$1,2$。
  * 进一步能够发现，这些沉底的数$x$在新数列中满足
    * 记$x$在新数列中的位置为$pos$，则$x\geq max_{i\leq pos}A_i$
    * 为充分条件，但并不是必要条件，因为$x$可能本来就在$pos$上，没有发生过移动。
  * 从上述过程中不难发现对于满足上述性质的数在原排列中有两种状态：从前面移动过来，不发生任何移动。
    * 这里一定有人会问：为啥只有两种状态？不是这个数$x$有可能前面的所有位置移动过来吗？
      * 但不难发现这个数$x$在原数列中的位置完全由 前一个满足上述性质的数$x'$决定。因为对于每个子问题最大的数都沉底，而这个沉底的位置恰好是下一个$x$的前一个位置。这样每个满足上述性质的数都被上一个数牵制，而第一个满足该性质的数在原排列中的位置一定是第一个。
  * 而不满足上述性质的数仅仅有一种状态：向前移动一格
  * 因此这些不满足上述性质的数可以被归成一类数，直接用组合数转移即可，而满足上述性质的数分两类讨论
  * 因此我们可以设计出如下方程：
    * 记$f_{i,j}$表示对于生成排列前$i$个位置，当前$1\sim i$的前缀最大值为$j$时，对应原排列的方案数
    * 当$i$位置已经被钦定为$x$，$\begin{cases}f_{i,j}+=f_{i-1,j}\quad s[i]<j\\f_{i,s[i]}+=f_{i-1,j}*2\quad s[i]>j\end{cases}$
    * 当$i$位置未被钦定，在剩余没被使用过的数$x$中又分为两类：
      * 当$x>j$时，$f_{i,x}+=f_{i-1,j}*2$
      * 当$x<j$时，$f_{i,j}+=f_{i-1,j}$
    * 在实现的时候有些讲究
      * 对于剩余的数的枚举，在$<j$的中，剩余的未被固定的数，还要去掉$1\sim i$中已经被固定的位置的个数
      * 对于前面有效的$j$，必须不是 之后才会被固定的数