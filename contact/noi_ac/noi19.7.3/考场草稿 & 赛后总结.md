赛后总结

* $T1$ [神树的权值](http://www.noi.ac/contest/170/problem/525)
  * 竟然是瓶颈路！！！考场上完全没想到，一直以为是二次扫描换根法。看来要重新理解下 $kruskal$重构树 了….
  * 这题是这样的，考虑以$x$为根的时候那些点能够产生贡献。假设点$u$能够产生贡献，则$\forall i\in V_{x\to u},i\neq u,s_i< s_u$。用人话说就是，只用$s<s_u$的点能够让 $x$ 与 $u$ 连通的 $u$。这东西怎么办？
  * $s_x$互不相同的做法
    * 回忆$kruskal$求最小生成树的过程，不难发现当边 $e$ 被加入的时候，图中的所有边 $e'$ 都满足 $w_{e'}<w_e$ ，且用小于$w_e$的边能够连接的点都已经被连接上了。不可能存在某个点 $x$ 在原图中与边 $e$ 存在一条通路使得$\forall e', w_{e'}<w_e$，如果是的话这些边一定会被加入到最小生成树中（因为$kruskal$每一个阶段求得的都是以$<w_e$的边组成的**最小生成树林**）
    * 类比上述过程，当点 $u$ 被加入的时候，$kruskal$中只有权值$s<s_u$的点，枚举与$u$相连且另一端$s_v<s_u$的边并加入，当$u$与某棵已经存在 在$kruskal$中的树相连的时候，这棵树中的所有点都能够通过一条权值恒小于$s_u$的通路连到$u$，并且没有遗漏（因为如果遗漏，就与极大生成树矛盾，同最小生成树理）
  * $s_x$存在相同的做法
    * 与$s_x$互不相同的做法类似，只是在处理相同权值的时候需要特殊处理。根据题面要求，当通路中存在$s_x=s_u$这条通路无贡献，因此我们在加入权值为$S$的点集前，先枚举与$S$相连且另一端$s_v<s_S$的边，将这些已经存在 在$kruskal$中的树的树根上打上标记，表示这棵树中所有点都能够通过一条权值恒小于$s_S$的通路连到$S$。
    * 最后我们再统计整棵树上的标记即可，这里我个人认为使用带权并查集统计即可~~（然而实现后发现这样并不行）~~
  * 在实现的时候，可以用并查集维护生成树林中的每棵树，在连边的时候将两棵树在并查集中的根按两个根的$s$大小，由大根连向小根，同时在并查集上合并两树（注意生成树根的维护）。